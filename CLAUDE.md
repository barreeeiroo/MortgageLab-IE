# MortgageLab-IE

Irish mortgage comparison tool. See @README.md and @CONTRIBUTING.md for setup.

## Conventions

### Document What You Learn

When discovering patterns, gotchas, or non-obvious behavior, update the relevant CLAUDE.md file. Keep entries concise - no redundant or self-explanatory info.

### Keep Components Light

React components (src/components/) should be thin presentation layers. Extract pure JS logic to src/lib/:

- Calculations → lib/mortgage/ or lib/utils/
- Data transforms → lib/utils/
- State logic → lib/stores/

## Quick Reference

- **Package manager**: Bun (not npm)
- **Linter/formatter**: Biome - run `bun run lint:fix` before commits
- **Path alias**: `@/*` → `./src/*`
- **Testing**: Vitest for unit tests (`bun run test:unit`), Playwright for E2E (`bun run test:e2e`)

## Architecture

**Island pattern**: Astro pages (.astro) with React islands (*Island.tsx) that hydrate client-side.

**State**: Nanostores with `$` prefix (e.g., `$ratesFormValues`). Components subscribe via `useStore()`.

**Generated data**: data/rates/*.json and data/rates/history/*.json are generated by scrapers - don't edit manually.

## Key Directories

- src/lib/ - Business logic (see @src/lib/CLAUDE.md)
- scripts/rate-scraper/ - Rate scrapers (see @scripts/rate-scraper/CLAUDE.md)
- src/components/breakeven/ - Breakeven calculators with shared components (ChartLegend, ChartTooltip, BreakevenResultDialog)
