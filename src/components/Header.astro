---
import { NAV_ITEMS, SITE } from "../lib/constants";
import { ThemeToggle } from "./ThemeToggle";
---

<header class="sticky top-0 z-50 border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
	<div class="container mx-auto px-4">
		<nav class="flex h-14 items-center justify-between">
			<div class="flex items-center gap-8">
				<a href="/" class="font-semibold text-lg text-primary hover:text-primary/80 transition-colors">
					{SITE.shortName}
				</a>
				<ul class="hidden md:flex items-center gap-6">
					{NAV_ITEMS.map((item) => (
						<li class="relative group">
							{"children" in item ? (
								<>
									<button
										class="text-sm text-muted-foreground hover:text-foreground transition-colors flex items-center gap-1"
									>
										{item.label}
										<svg class="w-4 h-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
										</svg>
									</button>
									<ul class="absolute left-0 top-full pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
										<div class="bg-popover border border-border rounded-md shadow-lg py-1 min-w-[160px]">
											{item.children.map((child) => (
												<li>
													<a
														href={child.href}
														class="block px-4 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"
													>
														{child.label}
													</a>
												</li>
											))}
										</div>
									</ul>
								</>
							) : (
								<a
									href={item.href}
									class="text-sm text-muted-foreground hover:text-foreground transition-colors"
								>
									{item.label}
								</a>
							)}
						</li>
					))}
				</ul>
			</div>
			<div class="flex items-center gap-4">
				<a
					href="/resources"
					class="text-sm text-muted-foreground hover:text-foreground transition-colors"
				>
					Resources
				</a>
				<ThemeToggle client:load />
			</div>
		</nav>
	</div>
</header>
